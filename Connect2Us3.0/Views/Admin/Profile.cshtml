@model book2us.Controllers.AdminProfileViewModel

@{
    ViewBag.Title = "Admin Profile";
}

<h2>Admin Profile</h2>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">
        @TempData["Success"]
    </div>
}

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Profile Information</h4>
                <hr />
                <dl class="row">
                    <dt class="col-sm-3">Username</dt>
                    <dd class="col-sm-9">@Model.Admin.UserName</dd>
                    
                    <dt class="col-sm-3">Email</dt>
                    <dd class="col-sm-9">@Model.Admin.Email</dd>
                    
                    <dt class="col-sm-3">Name</dt>
                    <dd class="col-sm-9">@Model.Admin.FirstName @Model.Admin.LastName</dd>
                    
                    <dt class="col-sm-3">Phone</dt>
                    <dd class="col-sm-9">@Model.Admin.Phone</dd>
                    
                    <dt class="col-sm-3">Address</dt>
                    <dd class="col-sm-9">@Model.Admin.Address, @Model.Admin.City, @Model.Admin.State</dd>
                    
                    <dt class="col-sm-3">Country</dt>
                    <dd class="col-sm-9">@Model.Admin.Country</dd>
                    
                    <dt class="col-sm-3">Gender</dt>
                    <dd class="col-sm-9">@Model.Admin.Gender</dd>
                    
                    <dt class="col-sm-3">Age</dt>
                    <dd class="col-sm-9">@Model.Admin.Age</dd>
                </dl>
                
                <div class="mt-3">
                    @Html.ActionLink("Edit Profile", "EditProfile", null, new { @class = "btn btn-primary" })
                    @Html.ActionLink("Manage Banking", "Banking", "Banking", null, new { @class = "btn btn-secondary" })
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Available Balance</h4>
                <h2>R @Model.AvailableBalance.ToString("N2")</h2>
                <div class="mt-3">
                    @Html.ActionLink("Mock Withdrawal", "MockWithdrawal", null, new { @class = "btn btn-warning" })
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Bank Accounts</h4>
                @if (Model.BankAccounts.Any())
                {
                    <table class="table">
                        <tr>
                            <th>Bank Name</th>
                            <th>Account Holder</th>
                            <th>Account Number</th>
                            <th>Account Type</th>
                            <th>Created Date</th>
                        </tr>
                        @foreach (var account in Model.BankAccounts)
                        {
                            <tr>
                                <td>@account.BankName</td>
                                <td>@account.AccountHolderName</td>
                                <td>@account.AccountNumber</td>
                                <td>@account.AccountType</td>
                                <td>@account.CreatedDate.ToString("yyyy-MM-dd")</td>
                            </tr>
                        }
                    </table>
                }
                else
                {
                    <p>No bank accounts found. @Html.ActionLink("Add Bank Account", "AddBankAccount", "Banking", null, new { @class = "btn btn-sm btn-primary" })</p>
                }
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Withdrawal History</h4>
                @if (Model.WithdrawalHistory.Any())
                {
                    <table class="table">
                        <tr>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Requested Date</th>
                            <th>Processed Date</th>
                            <th>Notes</th>
                        </tr>
                        @foreach (var withdrawal in Model.WithdrawalHistory)
                        {
                            <tr>
                                <td>R @withdrawal.Amount.ToString("N2")</td>
                                <td>
                                    <span class="badge badge-@(withdrawal.Status == book2us.Models.WithdrawalStatus.Completed ? "success" : 
                                                             withdrawal.Status == book2us.Models.WithdrawalStatus.Rejected ? "danger" : 
                                                             withdrawal.Status == book2us.Models.WithdrawalStatus.Pending ? "warning" : "info")">
                                        @withdrawal.Status
                                    </span>
                                </td>
                                <td>@withdrawal.RequestedDate.ToString("yyyy-MM-dd")</td>
                                <td>@(withdrawal.ProcessedDate != null ? withdrawal.ProcessedDate.Value.ToString("yyyy-MM-dd") : "N/A")</td>
                                <td>@withdrawal.Notes</td>
                            </tr>
                        }
                    </table>
                }
                else
                {
                    <p>No withdrawal history found.</p>
                }
            </div>
        </div>
    </div>
</div>

<div class="mt-3">
    @Html.ActionLink("Back to Dashboard", "Index", null, new { @class = "btn btn-secondary" })
</div>